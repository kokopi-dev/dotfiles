# general packages
sudo pacman -S swaybg wl-clipboard wl-clip-persist cliphist slurp grim satty mako neovim firefox ghostty fastfetch xdg-desktop-portal-wlr xdg-desktop-portal-gtk libnotify unzip bat rsync exa ripgrep bash-completion jq otf-font-awesome thunar tumbler less fd mpv btop rofi difftastic udiskie

# sony raw image thumbnail
yay -S raw-thumbnailer

# screenrecording
yay -S wl-screenrec

# fix locale
# double check /etc/locale.gen for en_US.UTF-8
sudo locale-gen
sudo localectl set-locale LANG=en_US.UTF-8

# sound
sudo pacman -S pipewire pipewire-alsa pipewire-pulse pipewire-jack wireplumber pavucontrol
systemctl --user enable --now pipewire pipewire-pulse wireplumber

# discord, just run discord without flags with xwayland
# need 'export DISPLAY=:0' in autostart.sh
sudo pacman -S xorg-xwayland

# japanese
sudo pacman -S fcitx5 fcitx5-anthy fcitx5-gtk fcitx5-qt fcitx5-configtool
sudo pacman -S adobe-source-han-sans-jp-fonts
fc-cache -fv

# npm
yay -S fnm
echo 'eval "$(fnm env --use-on-cd)"' >> ~/.bashrc

source ~/.bashrc
fnm install --lts
fnm use lts-latest

# tailscale
https://tailscale.com/download/linux/arch

# starship
sudo pacman -S starship
echo 'eval "$(starship init bash)"' >> ~/.bashrc

# ssh
sudo pacman -S openssh
sudo systemctl start sshd
sudo systemctl enable sshd

# password manager
sudo pacman -S pass
# create ssh key for pw manager server
ssh-keygen -t ed25519 -C "username@hostname"
# add pub to pw manager server
# clone syncpass and run ./syncpass init and follow instructions
# run ./syncpass update to get latest passwords

# gtk theme
sudo pacman -S sassc gnome-themes-extra
yay -S gtk-engine-murrine
# instructions: https://www.pling.com/p/1681315
# probably: Tokyonight-BL-LB-dark.tar.xz
# rename ~/.themes/Tokyonight-BL-LB-Dark to ~/.themes/tokyonight-dark
# copy dotfiles > ~/.config/gtk-3.0/
# add the autostart of gsettings
# firefox > about:support > os theme should now be tokyonight

# fonts
# add to ~/.local/share/fonts/*.ttf
# https://github.com/vercel/geist-font/releases
yay -S ttf-nerd-fonts-symbols
fc-cache -fv

# monitor management
# use wlr-randr to set kanshi settings when getting monitor name
yay -S wdisplays wlr-randr
sudo pacman -S kanshi

# bluetooth
sudo pacman -S bluez bluez-utils blueman pipewire-bluetooth
sudo systemctl enable --now bluetooth.service
# sudo vim /etc/bluetooth/main.conf
# uncomment [Policy] ... AutoEnable=true
# validate btusb enabled: lsmod | grep btusb
# not enabled: sudo modprobe btusb

# wallpapers
yay -S awww
# if pyenv installed: PATH="/usr/bin:$PATH" yay -S waypaper-git
yay -S waypaper-git

# lock screen
sudo pacman -S swayidle
yay -S swaylock-effects-git
#  create dir and this file: /etc/systemd/logind.conf.d/laptop-lid.conf
#  add this:
# [Login]
# HandleLidSwitch=hibernate
# HandleLidSwitchExternalPower=hibernate
# reboot pc


# icons
# https://www.gnome-look.org/p/1715570
# files -> catppuccin-mocha-alt2
# move to ~/.local/share/icons
# gtk-update-icon-cache ~/.local/share/icons/catppuccin-mocha-icons
#
# rofi icons new:
git clone https://github.com/worron/ACYLS.git ~/.icons/ACYLS

# icon cursors
# https://github.com/catppuccin/cursors
# cd $HOME/.icons
# curl -LOsS https://github.com/catppuccin/cursors/releases/download/v2.0.0/catppuccin-mocha-dark-cursors.zip
# unzip catppuccin-mocha-dark-cursors.zip
# rm catppuccin-mocha-dark-cursors.zip
# gtk-update-icon-cache -f ~/.icons/catppuccin-mocha-dark-cursors

# script this later
cd ~/.icons/ACYLS/scalable/apps/
ln -s ../real_icons/apps/gsd-xrandr.svg network.cycles.wdisplays.svg
ln -s ../real_icons/apps/qvidcap.svg com.obsproject.Studio.svg
ln -s ../real_icons/apps/gnome-settings-accessibility-keyboard.svg fcitx.svg
ln -s ../real_icons/apps/aniwall.svg waypaper.svg
ln -s ../real_icons/apps/file-manager.svg org.xfce.thunar.svg
ln -s ../real_icons/apps/gnome-monitor.svg btop.svg
ln -s ../real_icons/apps/bash.svg com.mitchellh.ghostty.svg
ln -s ../real_icons/apps/preferences-sound.svg org.pulseaudio.pavucontrol.svg
ln -s ../real_icons/devices/drive-multidisk.svg dbeaver.svg

# change color:
# find ~/.icons/ACYLS/scalable/real_icons/devices -name "*.svg" -exec sed -i 's/#A0A0A0/#dfced9/g' {} \;
# find ~/.icons/ACYLS/scalable/real_icons/apps -name "*.svg" -exec sed -i 's/#A0A0A0/#dfced9/g' {} \;
# #old_color/#new_color

# terminal fzf
sudo pacman -S fzf
# bashrc
# eval "$(fzf --bash)" 

# screensharing
# first packages should contain xdg wlr and gtk for screensharing
# validate its running with these commands:
# systemctl --user status xdg-desktop-portal-wlr
# journalctl --user -u xdg-desktop-portal-wlr -f
# next add this to: ~/.config/xdg-desktop-portal/portals.conf
[preferred]
default=gtk
org.freedesktop.impl.portal.ScreenCast=wlr
org.freedesktop.impl.portal.Screenshot=wlr
# restart

# waybar debug
waybar -l debug
